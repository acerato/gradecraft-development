= content_nav_for SubmissionsExport

%h3.pagetitle= @title

.pageContent
  = render "layouts/alerts"

  %h2 Submissions Exports
  %br
  %table.dynatable
    %thead
      %tr
        %th Assignment
        %th Generated By
        %th #{term_for :team}
        %th # Students
        %th Filename
        %th Created
        %th Status
        %th
    %tbody
      - @submissions_exports.each do |export|
        %tr
          %td
            = link_to export.assignment.name, assignment_path(export.assignment)
          %td
            = link_to export.professor.name, user_path(export.professor)
          %td
            - if export.team
              = link_to export.team.name, team_path(export.team)
          %td
            = export.student_ids.count
          %td
            - if export.downloadable?
              = link_to export.export_filename, download_submissions_export_path(export)
            - else
              = export.export_filename
          %td
            = "#{time_ago_in_words(export.last_export_completed_at)} ago" if export.last_export_completed_at
          %td
            - if export.last_export_completed_at
              = "Complete"
            - elsif export.created_at and not export.last_export_completed_at
              = "In Progress"
          %td
            .right
              %ul.button-bar
                - if export.downloadable?
                  %li= link_to glyph(:download) + "Download", download_submissions_export_path(export), class: 'button', style: "margin-right: 18px"
                %li= link_to glyph(:trash) + "Delete", export, class: 'button', data: { confirm: 'This will delete the submissions export. Are you sure?' }, :method => :delete

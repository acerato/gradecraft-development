= content_nav_for presenter.assignment

%h3.pagetitle= presenter.title

.pageContent
  = render "layouts/alerts"

  #tabs.ui-tabs.ui-widget
    %ul.ui-tabs-nav{role: "tablist"}
      %li
        %a{ "href" => "#tab1"} Description &amp; Downloads
      - if presenter.show_rubric_preview? current_student
        %li
          %a{ "href" => "#tab2"} Grading Rubric
      - if presenter.has_submission_for? current_student
        %li
          %a{ :href => "#tab3"} My Submission
        %li
          %a{ href: "#history" } My Submission History

      - if presenter.grades_available_for? current_student
        %li
          %a{ :href => "#tab4"} My Grade
        - if !presenter.hide_analytics?
          %li
            %a{ :href => "#tab5"} Class Analytics

    #tabt1.ui-tabs-panel.ui-widget-content{role: "tabpanel"}
      #tab1.active
        = render partial: "assignments/description_and_downloads", locals: { presenter: presenter }
      - if presenter.show_rubric_preview? current_student
        #tab2
          = render partial: "rubrics/components/rubric_table", locals: { rubric: presenter.rubric, student: current_student, include_grade_info: false }
      - if presenter.has_submission_for?(current_student)
        #tab3
          = render "submissions/submission_content",
              presenter: Submissions::ShowPresenter.new(id: presenter.submission_for_assignment(current_student).id,
                assignment_id: presenter.assignment.id, course: current_course)
        #history
          = history_timeline presenter.submission_grade_history(current_student)
      - if presenter.grades_available_for? current_student
        #tab4
          = render partial: "grades/grade_content", locals: { grade: presenter.grade_for(current_student) }
        - if !presenter.hide_analytics?
          #tab5
            - if presenter.assignment.has_groups?
              = render "grades/analytics/group_analytics", presenter: presenter
            - else
              = render "grades/analytics/individual_analytics", presenter: presenter
